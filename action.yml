name: 'Build and push docker image to ECR'
description: 'Greet someone'
inputs:
  secrets:
    description: 'Path to root folder with image'
    required: false
  parameters:
    description: 'Github token'
    required: false
  prefix:
    description: 'Path to root folder with image'
    required: false

runs:
  using: "composite"
  steps:
      - name: Read secrets from AWS Secrets Manager into environment variables  
        uses: abhilash1in/aws-secrets-manager-action@v2.0.0
        with:
          secrets: ${{ inputs.secrets }}
          parse-json: true

      - name: Get parameter store values
        shell: bash
        run: get-ssm-params.sh
        env:
          INPUT_PREFIX: ${{ inputs.prefix }}
          INPUT_SSM_PARAMETER_LIST: ${{inputs.parameters}}


  