name: "AWS secrets"
description: "Get AWS secrets and parameters"
inputs:
  secrets:
    description: "Secrets list"
    required: false
  parameters:
    description: "Parameters list"
    required: false
  prefix:
    description: "Parameters prefix"
    required: false

runs:
  using: "composite"
  steps:
    - name: Read secrets from AWS Secrets Manager into environment variables
      uses: abhilash1in/aws-secrets-manager-action@v2.0.0
      with:
        secrets: ${{ inputs.secrets }}
        parse-json: true

    - name: Get parameter store values
      shell: bash
      run: ${{ github.action_path }}/get-ssm-params.sh
